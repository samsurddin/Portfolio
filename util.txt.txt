utility function for versoin 6